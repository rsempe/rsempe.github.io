<%# Usage: render "shared/gallery", images: [...], gallery_id: "villa-gallery", title: "..." %>
<%# Each image hash can have: src (carousel), large_src (lightbox, optional), alt %>
<% gallery_id ||= "gallery-#{SecureRandom.hex(4)}" %>

<div class="gallery-section">
  <% if defined?(title) && title.present? %>
    <h3 class="gallery-title"><%= title %></h3>
  <% end %>

  <div class="swiper gallery-swiper" id="<%= gallery_id %>">
    <div class="swiper-wrapper">
      <% images.each_with_index do |image, index| %>
        <div class="swiper-slide">
          <a href="<%= asset_path(image[:large_src] || image[:src]) %>"
             class="glightbox"
             data-gallery="<%= gallery_id %>"
             data-alt="<%= image[:alt] %>">
            <%= image_tag image[:src],
                alt: image[:alt],
                class: "gallery-image img-responsive",
                loading: index > 2 ? "lazy" : "eager" %>
          </a>
        </div>
      <% end %>
    </div>
    <div class="swiper-pagination" style="margin-top: 25px;"></div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
  </div>
</div>
